<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
          crossorigin="anonymous">
</head>

<body>
<div id="app">
    <div class="p-20 bg-blue-100">
        <div class="bg-white p-6 rounded-lg shadow-lg">
            <h2 class="text-2xl font-bold mb-2 text-gray-800">This is my Chat app</h2>
            <ul class="list-outside list-none">
                <li v-for="message in messages">{{message}}</li>
            </ul>

<!--            form-->
                <form @submit.prevent="sendMessage">
                    <div class="flex items-center mb-5 w-1/2">
                        <input v-model="newMessage" name="name" id="name" type="text" placeholder="type here" class="border-b-2 border-gray-400 flex-1 py-2 placeholder-gray-300 outline-none focus:border-green-400">
                    </div>
                </form>
        </div>
    </div>
</div>
<script src="/socket.io/socket.io.js"></script>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<script>
    const socket = io();
    const { createApp, ref, computed, onMounted } = Vue

    createApp({
        setup() {
            const newMessage = ref('')
            const messages = ref([])

            const sendMessage = ()=>{
                messages.value.push(newMessage.value)
                socket.emit('chat-message',newMessage.value)
                newMessage.value = null
            }

            socket.emit('Created','Saiem')
            socket.on('Created',(data)=>{
                console.log("html",data)
            })
            socket.on('chat-message',(data)=>{
                messages.value.push(data)
            })

            return {
                newMessage,
                sendMessage,
                messages
            }
        }
    }).mount('#app')
</script>

</body>

</html>